%h2 Owners
%table.table.table-striped
  %thead
    %th Name
    %th Email
    %th Phone
    %th Nationality
    %th Address
    %th
  %tbody
    - @submission.declarations.each do |declaration|
      - owner = declaration.owner
      %tr
        %td.owner-name
          = link_to '#',
            "data-target" => "#declaration_#{declaration.id}",
            "data-toggle" => "modal" do
            = owner
          = render partial: "submissions/forms/owner_modal",
            locals: { declaration: declaration, modal_id:  "declaration_#{declaration.id}" }
        %td.owner-email= owner.email
        %td.owner-phone_number= owner.phone_number
        %td.owner-nationality= owner.nationality
        %td.owner-address= owner.inline_address
        %td
          = link_to '#',
            class: 'btn-link',
            onclick: 'return confirm("Are you sure you want to remove this owner?");', style: 'color: red;' do
            %i.fa.fa-trash
            Remove


    - @submission.removed_registry_owners.each do |owner|
      %tr
        %td.owner-name.strike= owner
        %td.strike= owner.email
        %td.strike= owner.phone_number
        %td.strike= owner.nationality
        %td.strike= owner.inline_address
        %td
          = link_to '#', class: 'btn-link' do
            %i.fa.fa-mail-reply-all
            Reinstate

.row
  .col-md-12
    = link_to '#', class: 'btn btn-primary',
      "data-target" => "#new_declaration",
      "data-toggle" => "modal" do
      %i.fa.fa-plus
      Add Individual Owner
    = render partial: "submissions/forms/owner_modal", locals: { declaration: Declaration.new, modal_id:  "new_declaration" }
