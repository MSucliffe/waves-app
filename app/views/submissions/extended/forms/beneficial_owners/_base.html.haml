%h2 Beneficial Owners
%table.table.table-striped
  %thead
    %th Name
    %th IMO #
    %th Nationality
    %th Status
    %th Email
    %th Phone
    %th
  %tbody
    - @submission.beneficial_owners.each do |beneficial_owner|
      %tr
        %td.beneficial_owner-name= beneficial_owner.name
        %td.beneficial_owner-imo_number= beneficial_owner.imo_number
        %td.beneficial_owner-nationality= beneficial_owner.nationality
        %td.beneficial_owner-status= beneficial_owner.eligibility_status
        %td.beneficial_owner-email= beneficial_owner.email
        %td.beneficial_owner-phone_number= beneficial_owner.phone_number
        %td

.row
  .col-md-12
    = link_to '#', class: 'btn btn-primary',
      "data-target" => "#new_beneficial_owner",
      "data-toggle" => "modal" do
      %i.fa.fa-plus
      Add Beneficial Owner

.modal.fade{id: "new_beneficial_owner", role: "dialog", tabindex: "-1"}
  .modal-dialog.modal-lg
    .modal-content
      = simple_form_for Submission::BeneficialOwner.new,
        method: :post,
        remote: true,
        url: submission_beneficial_owners_path(@submission) do |f|
        = hidden_field_tag "modal_id", "new_beneficial_owner"
        .modal-header
          %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
            %span{"aria-hidden" => "true"} Ã—
          %h4.modal-title New Beneficial Owner
        .modal-body
          .postcode-lookup
            .row
              .col-md-6
                = render partial: "submissions/basic/forms/owners/fields/name", locals: { owner_f: f, f: f, label: "Beneficial Owner Name" }
              .col-md-3
                = render partial: "submissions/basic/forms/owners/fields/nationality", locals: { owner_f: f }
              .col-md-3
                = f.input :imo_number, label: "Owner IMO Number"
            .row
              .col-md-6
                = f.input :eligibility_status, label: "Status",
                  as: :select,
                  collection: WavesUtilities::EligibilityStatus.all

              .col-md-3
                = f.input :email, label: "Email Address"
              .col-md-3
                = f.input :phone_number, label: "Phone Number", input_html: { class: "upcase" }

            = render partial: "submissions/basic/forms/owners/fields/address", locals: { owner_f: f, f: f }

        .modal-footer
          = button_tag(type: 'submit', class: "btn btn-primary pull-right") do
            Save Beneficial Owner
