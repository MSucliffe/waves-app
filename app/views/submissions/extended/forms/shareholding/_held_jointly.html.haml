%h4 Shares Held Jointly
%table.table.table-striped.table-bordered
  %thead
    %th Owners
    %th.col-md-3 Shares
  %tbody
    - @submission.declaration_groups.each do |declaration_group|
      %tr
        %td
          %table.table{style: 'margin-bottom: 0px !important;'}
            %tbody
              - declaration_group.declarations.each do |declaration|
                %tr
                  %td.owner_name
                    = declaration.owner
                    %a.pull-right{href: '#', style: 'color: red'} remove

          = link_to '#add-owner-to-group', class: 'btn btn-link', "data-target" => "#add-owner-to-group", "data-toggle" => "modal", style: 'color: green; padding: 0px !important; margin-top: 20px;' do
            %i.fa.fa-plus
            Add Owner to Group
        %td.shares_held
          = declaration_group.shares_held

= link_to '#add-new-group',
  class: 'btn btn-link',
  data: { target: "#add-new-group", toggle: "modal" },
  style: 'color: green; padding: 0px !important; margin-top: 20px;' do
  %i.fa.fa-plus
  Add Group of Joint Shareholders

- content_for :shareholding_modals do
  .modal.fade{id: 'add-new-group', role: "dialog", tabindex: "-1"}
    .modal-dialog.modal-sm
      .modal-content
        = simple_form_for Declaration::Group.new,
          remote: true,
          url: submission_declaration_groups_path(@submission) do |f|
          .modal-header
            %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
              %span{"aria-hidden" => "true"} Ã—
            %h4.modal-title Add Owner to New Group
          .modal-body
            .row
              .col-md-6
                = f.input :default_group_member, as: :select,
                  collection: @submission.declarations.map{ |d| [d.owner.name, d.id] },
                  include_blank: false,
                  input_html: { class: "select2 select2_single" },
                  label: "Owner Name"
          .modal-footer
            = f.submit "Add Owner to New Group", class: "btn btn-primary"
